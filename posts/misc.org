#+title: 其他备忘

* [[https://pandoc.org/][Pandoc]]
#+begin_quote
A universal document converter
#+end_quote

各种文档格式之间相互转换，支持市面上看到的绝大多数文档格式。

#+begin_src shell
pandoc -f markdown -t org -o output.org input.md
#+end_src

* FFmpeg
#+begin_quote
A complete, cross-platform solution to record, convert and stream audio and video.
#+end_quote

#+begin_src shell
# 旋转视频
ffmpeg -display_rotation -90 -i INPUT -c copy OUTPUT

# 修改视频的分辨率
ffmpeg -i INPUT -vf scale=1440:-1 OUTPUT

# 剪辑视频片段
ffmpeg -i INPUT -ss 00:05:10 -to 00:15:30 -c copy OUPUT

# 拼接多个视频
touch files.txt
echo "file '/path/to/input/file1'"
echo "file '/path/to/input/file2'"
echo "file '/path/to/input/file3'"

ffmpeg -f concat -i files.txt -c copy OUTPUT
#+end_src

* [[https://github.com/lsyncd/lsyncd][Lsyncd]]
#+begin_quote
Live Syncing(Mirror) Daemon
#+end_quote

基于inotify或fsevents通过rsync等传输工具实现实时同步文件。

* MySQL
保证utf-8为默认字符集。

#+begin_example
[client]
default-character-set = utf8mb4

[mysql]
default-character-set = utf8mb4

[mysqld]
character-set-client-handshake = FALSE
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci
#+end_example

* Tomcat虚拟主机
bin/catalina.sh文件中写到。

#+begin_example
# -----------------------------------------------------------------------------
# Control Script for the CATALINA Server
#
# Environment Variable Prerequisites
#
#   Do not set the variables in this script. Instead put them into a script
#   setenv.sh in CATALINA_BASE/bin to keep your customizations separate.
#
#+end_example

按照指引，创建bin/setenv.sh文件。

#+begin_src shell
#!/bin/bash

# 也可以写绝对路径。
export JAVA_HOME="$(jenv javahome)"
export JAVA_OPTS="-Xmx2048m -Xms1024m -XX:PermSize=128m -XX:MaxPermSize=256m -Dfile.encoding=UTF-8"
#+end_src shell

虚拟机主机配置在conf/server.xml。

#+begin_src nxml
<!-- conf/server.xml -->

  <!-- ... -->

  <Engine name="Catalina" defaultHost="localhost">

    <!-- ... -->

    <!-- 添加以下内容 -->
    <Host
        <!-- 域名不需要写端口 -->
        name="mydomain.com"
        <!-- 编译产出目录的绝对路径 -->
        appBase="/path/to/the/build/directory/of/your/java/project"
        unpackWARs="true"
        autoDeploy="true">

        <!-- 至少在Tomcat7，path="" 和 docBase=""不能少 -->
        <Context
            path=""
            docBase="/path/to/the/build/directory/of/your/java/project" crossContext="false"
            reloadable="true"
        />

        <!-- ... -->

    </Host>

    <!-- ... -->

  </Engine>

  <!-- ... -->
#+end_src
